# @package _global_

defaults:
  # set up habitat 
  - /env@habitat_baselines: habitat_baselines
  - /env@habitat: habitat 
  - /dataset/imagenav/hm3d_1env
    
  # set up experiment misc.
  - /exp: base
  - /logger@exp.logger: console
    
  # set up train
  - /runner@train: ppo
  - /lr@train.lr_schedule: actor_critic
  - /lr@train.lr_schedule.actor: constant
  - /lr@train.lr_schedule.critic: constant
  - /models/policy/nav_llama/qformer@train.policy: lora 
    
  # set up eval
  - /runner@eval: eval
  - /dataset@eval.dataset: offline_episode
    
  - _self_


exp:
  name: "lmnav_imagenav_1env"
  root_dir: "experiments/"
  logger:
    project: "lmnav"
    name: "lmnav lora 1env lr=2.5e-5"
    group: "train"
    tags: ['lora']

train:
  epochs: 10_000
  num_envs: 10
  batch_size: 120
  minibatch_size: 2
  num_grad_accums: 6

  max_rollout_steps: 64
  ppo_epochs: 2

  policy:
    
    
  lr_schedule:
    actor:
      lr: 2.5e-5
    critic:
      lr: 2.5e-5
        
        
eval:
  policy: ${..train.policy}
  num_episodes: 50
  save_videos: True
  deterministic: False
  num_envs: 10
  dataset:
    artifact:
      name: "offline_00744"
      version: "latest"
  pretrained_artifact:
    name: ${...exp.name}
